<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0 user-scalable=no">
    <title>Read Marker</title>

    <link rel="icon" type="image/svg+xml" href="../images/favicon.svg">
    <link rel="stylesheet" type="text/css" href="../css/reader.css">
</head>
<body>
    <!-- Top Bar -->
    <div id="top-bar">
        <div class="text" id="text-result">Read Marker</div>
        <button class="left" onclick="btnReset()">Reset</button>
        <button class="red">Close</button>
    </div>

    <!-- Scanner -->
    <div class="scanner" id="scanner1"></div>
    <div class="scanner" id="scanner2"></div>



    <script src="../js/MultitouchMarker-1.1.js"></script>
    
    <script>

        /////////////////////////////////////////////////////////////////////
        //                     Scanner Initialization                      //
        /////////////////////////////////////////////////////////////////////

        // Scanner 1
        const scanner1 = new Scanner({
            element: "scanner1",
            posX: "15vw",
            posY: "20vh",
            width: "38vw",
            height: "38vw",
            text: "Place Multitouch Marker here!",
            bgColor: "#f5720055",
            bgImage: "url(../images/favicon.svg)",
            showMark: true,
            markColor: "#4771ed",
            showInfo: true,
        });

        // Scanner 2
        const scanner2 = new Scanner({
            element: "scanner2",
            posX: "55vw",
            posY: "20vh",
        });


        /////////////////////////////////////////////////////////////////////
        //                        Read Every Frame                         //
        /////////////////////////////////////////////////////////////////////
        
        const textResult = document.getElementById("text-result");
        let scannerData = {};

        function frameLoop() {
            if (scanner1.getData(scannerData)) {
                textResult.textContent = "Scanner 1: ";
                textResult.textContent += scannerData.distance + " px  |  ";
                textResult.textContent += scannerData.numOfTouch + " touches";
            }
            else if (scanner2.getData(scannerData)) {
                textResult.textContent = "Scanner 2: ";
                textResult.textContent += scannerData.distance + " px  |  ";
                textResult.textContent += scannerData.numOfTouch + " touches";
            }

            requestAnimationFrame(() => {
                frameLoop();
            });
        }

        frameLoop();


        /////////////////////////////////////////////////////////////////////
        //                        Button Functions                         //
        /////////////////////////////////////////////////////////////////////

        function btnReset() {
            window.location.reload();
        }

    </script>
</body>
</html>